vp-pbft:
 image: hyperledger/fabric-peer
 environment:
  - CORE_CLI_ADDRESS=172.22.28.130:7052
  - CORE_REST_ADDRESS=172.22.28.130:7050
  - CORE_PEER_LISTENADDRESS=172.22.28.130:7051
  - CORE_PEER_ADDRESS=172.22.28.130:7051
  - CORE_PEER_VALIDATOR_CONSENSUS_PLUGIN=pbft
  - CORE_SECURITY_ENABLED=true
  - CORE_PBFT_GENERAL_MODE=batch
  - CORE_PBFT_GENERAL_N=4


  - CORE_PBFT_GENERAL_BATCHSIZE=500
  - CORE_PBFT_GENERAL_TIMEOUT_BATCH=1s
  - CORE_PBFT_GENERAL_TIMEOUT_REQUEST=2s
  - CORE_PBFT_GENERAL_TIMEOUT_VIEWCHANGE=4s
  - CORE_PBFT_GENERAL_TIMEOUT_RESENDVIEWCHANGE=2s
  - CORE_PBFT_GENERAL_TIMEOUT_NULLREQUEST=0s
  - CORE_PBFT_GENERAL_TIMEOUT_BROADCAST=1s
 ports:
   - "7050:7050"
   - "7051:7051"
   - "7052:7052"
   - "7053:7053"
 volumes:
    - /var/run/docker.sock:/var/run/docker.sock

 command: sh -c "sleep 10; peer node start"
